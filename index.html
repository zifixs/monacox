<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULTIMATE Cookie Clicker</title>
    <style>
        :root {
            --primary: #FF9800;
            --primary-dark: #F57C00;
            --primary-light: #FFE0B2;
            --secondary: #8BC34A;
            --secondary-dark: #689F38;
            --accent: #FF5722;
            --background: #FFF8F0;
            --text: #5D4037;
            --text-light: #8D6E63;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255,214,161,0.2) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255,214,161,0.2) 0%, transparent 20%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 2px solid var(--primary-light);
            margin-bottom: 30px;
        }
        
        .game-title {
            font-size: 2.5rem;
            color: var(--primary-dark);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stats {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
        }
        
        .counter {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-dark);
        }
        
        .cps-counter {
            font-size: 1.2rem;
            color: var(--text-light);
        }
        
        .main-game {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .cookie-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .cookie-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 20px 0;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .cookie {
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%23D7CCC8" stroke="%235D4037" stroke-width="2"/><circle cx="30" cy="30" r="5" fill="%235D4037"/><circle cx="70" cy="30" r="7" fill="%235D4037"/><circle cx="40" cy="60" r="4" fill="%235D4037"/><circle cx="65" cy="65" r="3" fill="%235D4037"/><circle cx="25" cy="50" r="6" fill="%235D4037"/></svg>');
            background-size: contain;
            transition: var(--transition);
            filter: drop-shadow(var(--shadow));
        }
        
        .cookie:hover {
            transform: scale(1.05) rotate(5deg);
        }
        
        .cookie:active {
            transform: scale(0.95) rotate(-5deg);
        }
        
        .click-effect {
            position: absolute;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
            animation: float-up 1s forwards;
            pointer-events: none;
            user-select: none;
            z-index: 10;
            text-shadow: 0 0 5px rgba(255,255,255,0.8);
        }
        
        @keyframes float-up {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(1.5); }
        }
        
        .upgrades-section {
            flex: 2;
            display: flex;
            flex-direction: column;
        }
        
        .upgrades-tabs {
            display: flex;
            border-bottom: 2px solid var(--primary-light);
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            color: var(--text-light);
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            color: var(--primary-dark);
            border-bottom: 3px solid var(--primary);
        }
        
        .tab:hover:not(.active) {
            color: var(--text);
            background-color: rgba(255,152,0,0.1);
        }
        
        .upgrades-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .upgrade {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 2px solid var(--primary-light);
            cursor: pointer;
        }
        
        .upgrade:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }
        
        .upgrade:active {
            transform: translateY(0);
        }
        
        .upgrade.disabled {
            opacity: 0.6;
            cursor: not-allowed;
            filter: grayscale(0.5);
        }
        
        .upgrade-name {
            font-size: 1.2rem;
            color: var(--primary-dark);
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .upgrade-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .upgrade-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }
        
        .upgrade-price {
            font-weight: bold;
            color: var(--accent);
        }
        
        .upgrade-owned {
            color: var(--secondary-dark);
            font-weight: bold;
        }
        
        .progress-bar {
            height: 5px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .achievements-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            margin-top: 30px;
        }
        
        .section-title {
            font-size: 1.5rem;
            color: var(--primary-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .achievement {
            background: var(--primary-light);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .achievement.unlocked {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary-dark);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(139,195,74,0.3);
        }
        
        .achievement-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .achievement-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .achievement-description {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        .prestige-section {
            background: linear-gradient(135deg, #673AB7, #9C27B0);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .prestige-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .prestige-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .prestige-button {
            background: white;
            color: #673AB7;
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            display: block;
            margin: 0 auto;
        }
        
        .prestige-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        
        .prestige-button:active {
            transform: translateY(0);
        }
        
        .prestige-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .golden-cookie {
            position: fixed;
            width: 60px;
            height: 60px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%23FFD54F" stroke="%23F57F17" stroke-width="3"/><circle cx="30" cy="30" r="5" fill="%23F57F17"/><circle cx="70" cy="30" r="7" fill="%23F57F17"/><circle cx="40" cy="60" r="4" fill="%23F57F17"/><circle cx="65" cy="65" r="3" fill="%23F57F17"/><circle cx="25" cy="50" r="6" fill="%23F57F17"/></svg>');
            background-size: contain;
            cursor: pointer;
            animation: pulse 2s infinite, float 5s infinite ease-in-out;
            z-index: 100;
            filter: drop-shadow(0 0 10px rgba(255,213,79,0.7));
            display: none;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateX(200%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .save-buttons {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            justify-content: center;
        }
        
        .game-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: bold;
        }
        
        .game-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .game-button:active {
            transform: translateY(0);
        }
        
        .game-button.secondary {
            background: var(--text-light);
        }
        
        .game-button.secondary:hover {
            background: var(--text);
        }
        
        .game-button.warning {
            background: #F44336;
        }
        
        .game-button.warning:hover {
            background: #D32F2F;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –æ—Å–æ–±—ã—Ö —Å–æ–±—ã—Ç–∏–π */
        @keyframes rainbow {
            0% { color: #FF0000; }
            14% { color: #FF7F00; }
            28% { color: #FFFF00; }
            42% { color: #00FF00; }
            57% { color: #0000FF; }
            71% { color: #4B0082; }
            85% { color: #9400D3; }
            100% { color: #FF0000; }
        }
        
        .rainbow-text {
            animation: rainbow 3s linear infinite;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .main-game {
                flex-direction: column;
            }
            
            .upgrades-container {
                grid-template-columns: 1fr;
            }
            
            .achievements-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 class="game-title">ULTIMATE COOKIE CLICKER</h1>
            <div class="stats">
                <div class="counter">–ü–µ—á–µ–Ω–µ–∫: <span id="cookies">0</span></div>
                <div class="cps-counter">–í —Å–µ–∫—É–Ω–¥—É: <span id="cps">0</span></div>
            </div>
        </header>
        
        <div class="main-game">
            <div class="cookie-section">
                <div class="cookie-container" id="cookie-container">
                    <div class="cookie" id="cookie"></div>
                </div>
                <div id="click-multiplier">–ó–∞ –∫–ª–∏–∫: <span id="click-value">1</span></div>
            </div>
            
            <div class="upgrades-section">
                <div class="upgrades-tabs">
                    <div class="tab active" data-tab="producers">–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</div>
                    <div class="tab" data-tab="click">–ö–ª–∏–∫</div>
                    <div class="tab" data-tab="prestige">–ü—Ä–µ—Å—Ç–∏–∂</div>
                </div>
                
                <div class="upgrades-container" id="producers-tab">
                    <!-- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
                
                <div class="upgrades-container" id="click-tab" style="display:none;">
                    <!-- –£–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
                
                <div class="upgrades-container" id="prestige-tab" style="display:none;">
                    <!-- –ü—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
        
        <div class="achievements-section">
            <h2 class="section-title">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            <div class="achievements-grid" id="achievements-container">
                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
        
        <div class="prestige-section">
            <h2 class="prestige-title">‚≠ê –ü—Ä–µ—Å—Ç–∏–∂</h2>
            <div class="prestige-info">
                <div>–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: <span id="prestige-level">0</span></div>
                <div>–ë–æ–Ω—É—Å: x<span id="prestige-bonus">1</span></div>
            </div>
            <div>–ü—Ä–µ—Å—Ç–∏–∂–Ω—ã—Ö –æ—á–∫–æ–≤: <span id="prestige-points">0</span></div>
            <div>–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–µ—Å—Ç–∏–∂: <span id="next-prestige">1,000,000</span> –ø–µ—á–µ–Ω–µ–∫</div>
            <button class="prestige-button" id="prestige-button" disabled>–ü—Ä–µ—Å—Ç–∏–∂!</button>
        </div>
        
        <div class="save-buttons">
            <button class="game-button" id="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button class="game-button secondary" id="load-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            <button class="game-button warning" id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
    </div>
    
    <div class="golden-cookie" id="golden-cookie"></div>
    
    <div class="notification" id="notification"></div>
    
    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let cookies = 0;
        let cookiesPerSecond = 0;
        let cookiesPerClick = 1;
        let totalCookiesClicked = 0;
        let totalCookiesProduced = 0;
        let prestigeLevel = 0;
        let prestigePoints = 0;
        let prestigeBonus = 1;
        let goldenCookiesClicked = 0;
        let gameVersion = "1.0.0";
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            lastUpdate: Date.now(),
            cookies: 0,
            upgrades: {},
            achievements: [],
            stats: {},
            prestige: {
                level: 0,
                points: 0,
                bonus: 1
            }
        };
        
        // –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
        const producers = {
            cursor: {
                name: "–ö—É—Ä—Å–æ—Ä",
                description: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–ª–∏–∫–∞–µ—Ç –ø–æ –ø–µ—á–µ–Ω—å–∫–µ",
                basePrice: 15,
                price: 15,
                owned: 0,
                cps: 0.1,
                priceIncrease: 1.15,
                unlockAt: 0,
                icon: "üñ±Ô∏è"
            },
            grandma: {
                name: "–ë–∞–±—É—à–∫–∞",
                description: "–ü–µ—á—ë—Ç –ø–µ—á–µ–Ω—å–µ –¥–ª—è –≤–∞—Å",
                basePrice: 100,
                price: 100,
                owned: 0,
                cps: 1,
                priceIncrease: 1.15,
                unlockAt: 10,
                icon: "üëµ"
            },
            farm: {
                name: "–§–µ—Ä–º–∞",
                description: "–í—ã—Ä–∞—â–∏–≤–∞–µ—Ç –ø—à–µ–Ω–∏—Ü—É –¥–ª—è –ø–µ—á–µ–Ω—å—è",
                basePrice: 1100,
                price: 1100,
                owned: 0,
                cps: 8,
                priceIncrease: 1.15,
                unlockAt: 50,
                icon: "üåæ"
            },
            mine: {
                name: "–®–∞—Ö—Ç–∞",
                description: "–î–æ–±—ã–≤–∞–µ—Ç —Å–∞—Ö–∞—Ä –∏ –º–∏–Ω–µ—Ä–∞–ª—ã",
                basePrice: 12000,
                price: 12000,
                owned: 0,
                cps: 47,
                priceIncrease: 1.15,
                unlockAt: 200,
                icon: "‚õèÔ∏è"
            },
            factory: {
                name: "–§–∞–±—Ä–∏–∫–∞",
                description: "–ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –ø–µ—á–µ–Ω—å—è",
                basePrice: 130000,
                price: 130000,
                owned: 0,
                cps: 260,
                priceIncrease: 1.15,
                unlockAt: 1000,
                icon: "üè≠"
            },
            bank: {
                name: "–ë–∞–Ω–∫",
                description: "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø–µ—á–µ–Ω—å–µ –∏–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤",
                basePrice: 1400000,
                price: 1400000,
                owned: 0,
                cps: 1400,
                priceIncrease: 1.15,
                unlockAt: 5000,
                icon: "üè¶"
            },
            temple: {
                name: "–•—Ä–∞–º",
                description: "–ë–æ–≥–∏ –¥–∞—Ä—è—Ç –≤–∞–º –ø–µ—á–µ–Ω—å–µ",
                basePrice: 20000000,
                price: 20000000,
                owned: 0,
                cps: 7800,
                priceIncrease: 1.15,
                unlockAt: 20000,
                icon: "üõï"
            },
            portal: {
                name: "–ü–æ—Ä—Ç–∞–ª",
                description: "–ü–µ—á–µ–Ω—å–µ –∏–∑ –¥—Ä—É–≥–∏—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π",
                basePrice: 330000000,
                price: 330000000,
                owned: 0,
                cps: 44000,
                priceIncrease: 1.15,
                unlockAt: 100000,
                icon: "üåÄ"
            }
        };
        
        // –£–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞
        const clickUpgrades = {
            betterCursor: {
                name: "–£–ª—É—á—à–µ–Ω–Ω—ã–π –∫—É—Ä—Å–æ—Ä",
                description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–µ—á–µ–Ω—å–µ –∑–∞ –∫–ª–∏–∫ –Ω–∞ 0.1",
                basePrice: 100,
                price: 100,
                owned: 0,
                bonus: 0.1,
                priceIncrease: 1.5,
                max: 10,
                icon: "üñ±Ô∏è‚ú®"
            },
            reinforcedClick: {
                name: "–£—Å–∏–ª–µ–Ω–Ω—ã–π –∫–ª–∏–∫",
                description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–µ—á–µ–Ω—å–µ –∑–∞ –∫–ª–∏–∫ –Ω–∞ 1",
                basePrice: 500,
                price: 500,
                owned: 0,
                bonus: 1,
                priceIncrease: 1.8,
                max: 5,
                icon: "üí™"
            },
            platinumClick: {
                name: "–ü–ª–∞—Ç–∏–Ω–æ–≤—ã–π –∫–ª–∏–∫",
                description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–µ—á–µ–Ω—å–µ –∑–∞ –∫–ª–∏–∫ –Ω–∞ 5",
                basePrice: 10000,
                price: 10000,
                owned: 0,
                bonus: 5,
                priceIncrease: 2,
                max: 3,
                icon: "üëë"
            },
            cosmicClick: {
                name: "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–ª–∏–∫",
                description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–µ—á–µ–Ω—å–µ –∑–∞ –∫–ª–∏–∫ –Ω–∞ 50",
                basePrice: 1000000,
                price: 1000000,
                owned: 0,
                bonus: 50,
                priceIncrease: 2.5,
                max: 1,
                icon: "üöÄ"
            }
        };
        
        // –ü—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
        const prestigeUpgrades = {
            legacy: {
                name: "–ù–∞—Å–ª–µ–¥–∏–µ",
                description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—É—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –Ω–∞ 1%",
                basePrice: 1,
                price: 1,
                owned: 0,
                bonus: 0.01,
                priceIncrease: 1.2,
                max: 100,
                icon: "üèõÔ∏è"
            },
            goldenLuck: {
                name: "–ó–æ–ª–æ—Ç–∞—è —É–¥–∞—á–∞",
                description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à–∞–Ω—Å –ø–æ—è–≤–ª–µ–Ω–∏—è –∑–æ–ª–æ—Ç—ã—Ö –ø–µ—á–µ–Ω–µ–∫ –Ω–∞ 1%",
                basePrice: 5,
                price: 5,
                owned: 0,
                bonus: 0.01,
                priceIncrease: 1.3,
                max: 20,
                icon: "üçÄ"
            },
            cookieMaster: {
                name: "–ú–∞—Å—Ç–µ—Ä –ø–µ—á–µ–Ω—å—è",
                description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Å–µ –ø–µ—á–µ–Ω—å–µ –∑–∞ –∫–ª–∏–∫ –Ω–∞ 1%",
                basePrice: 10,
                price: 10,
                owned: 0,
                bonus: 0.01,
                priceIncrease: 1.4,
                max: 50,
                icon: "üë®‚Äçüç≥"
            }
        };
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        const achievements = [
            { id: "first-cookie", name: "–ü–µ—Ä–≤–æ–µ –ø–µ—á–µ–Ω—å–µ", description: "–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –ø–µ—á–µ–Ω—å–∫–µ 1 —Ä–∞–∑", threshold: 1, icon: "üç™" },
            { id: "hundred-cookies", name: "100 –ø–µ—á–µ–Ω–µ–∫", description: "–°–æ–±–µ—Ä–∏—Ç–µ 100 –ø–µ—á–µ–Ω–µ–∫", threshold: 100, icon: "üíØ" },
            { id: "thousand-cookies", name: "1,000 –ø–µ—á–µ–Ω–µ–∫", description: "–°–æ–±–µ—Ä–∏—Ç–µ 1,000 –ø–µ—á–µ–Ω–µ–∫", threshold: 1000, icon: "üî¢" },
            { id: "million-cookies", name: "–ú–∏–ª–ª–∏–æ–Ω–µ—Ä", description: "–°–æ–±–µ—Ä–∏—Ç–µ 1,000,000 –ø–µ—á–µ–Ω–µ–∫", threshold: 1000000, icon: "üí∞" },
            { id: "first-producer", name: "–ü–µ—Ä–≤—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å", description: "–ö—É–ø–∏—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è", threshold: 1, check: () => Object.values(producers).some(p => p.owned > 0), icon: "üè≠" },
            { id: "cookie-farmer", name: "–§–µ—Ä–º–µ—Ä –ø–µ—á–µ–Ω–µ–∫", description: "–ö—É–ø–∏—Ç–µ 10 —Ñ–µ—Ä–º", threshold: 10, check: () => producers.farm.owned >= 10, icon: "üë®‚Äçüåæ" },
            { id: "golden-cookie", name: "–ó–æ–ª–æ—Ç–æ–∏—Å–∫–∞—Ç–µ–ª—å", description: "–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∑–æ–ª–æ—Ç–æ–º—É –ø–µ—á–µ–Ω—å—é", threshold: 1, check: () => goldenCookiesClicked > 0, icon: "üåü" },
            { id: "prestige", name: "–ü—Ä–µ—Å—Ç–∏–∂", description: "–ü—Ä–æ–π–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–π –ø—Ä–µ—Å—Ç–∏–∂", threshold: 1, check: () => prestigeLevel > 0, icon: "‚≠ê" },
            { id: "click-master", name: "–ú–∞—Å—Ç–µ—Ä –∫–ª–∏–∫–∞", description: "–°–¥–µ–ª–∞–π—Ç–µ 1,000 –∫–ª–∏–∫–æ–≤", threshold: 1000, check: () => totalCookiesClicked >= 1000, icon: "üëÜ" },
            { id: "idle-player", name: "–ò–≥—Ä–æ–∫ –±–µ–∑ –¥–µ–ª–∞", description: "–ü–æ–ª—É—á–∏—Ç–µ 10,000 –ø–µ—á–µ–Ω–µ–∫ –±–µ–∑ –∫–ª–∏–∫–æ–≤", threshold: 10000, check: () => totalCookiesProduced >= 10000 && totalCookiesClicked === 0, hidden: true, icon: "üò¥" }
        ];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            setupUI();
            updateDisplay();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            document.getElementById('cookie').addEventListener('click', clickCookie);
            document.getElementById('save-btn').addEventListener('click', saveGame);
            document.getElementById('load-btn').addEventListener('click', loadGame);
            document.getElementById('reset-btn').addEventListener('click', resetGame);
            document.getElementById('prestige-button').addEventListener('click', doPrestige);
            
            // –¢–∞–±—ã
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', switchTab);
            });
            
            // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            setInterval(gameLoop, 1000);
            
            // –ó–æ–ª–æ—Ç—ã–µ –ø–µ—á–µ–Ω—å—è
            setInterval(spawnGoldenCookie, 30000);
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            setInterval(autoSave, 30000);
            
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ñ—Ñ–ª–∞–π–Ω-–ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            calculateOfflineProgress();
            
            // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ
            showNotification("–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞! üéÆ");
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UI
        function setupUI() {
            // –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏
            const producersTab = document.getElementById('producers-tab');
            for (const [id, producer] of Object.entries(producers)) {
                producersTab.appendChild(createUpgradeElement(id, producer));
            }
            
            // –£–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞
            const clickTab = document.getElementById('click-tab');
            for (const [id, upgrade] of Object.entries(clickUpgrades)) {
                clickTab.appendChild(createUpgradeElement(id, upgrade));
            }
            
            // –ü—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
            const prestigeTab = document.getElementById('prestige-tab');
            for (const [id, upgrade] of Object.entries(prestigeUpgrades)) {
                prestigeTab.appendChild(createUpgradeElement(id, upgrade));
            }
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            const achievementsContainer = document.getElementById('achievements-container');
            achievements.forEach(achievement => {
                achievementsContainer.appendChild(createAchievementElement(achievement));
            });
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function createUpgradeElement(id, upgrade) {
            const element = document.createElement('div');
            element.className = 'upgrade';
            element.id = `upgrade-${id}`;
            element.innerHTML = `
                <div class="upgrade-name">
                    <span>${upgrade.icon || '‚ú®'} ${upgrade.name}</span>
                    <span class="upgrade-owned">${upgrade.owned || 0}</span>
                </div>
                <div class="upgrade-description">${upgrade.description}</div>
                <div class="upgrade-stats">
                    <span class="upgrade-price">–¶–µ–Ω–∞: ${formatNumber(upgrade.price)}</span>
                </div>
                ${upgrade.max ? `<div class="progress-bar"><div class="progress-fill" style="width: ${(upgrade.owned / upgrade.max) * 100}%"></div></div>` : ''}
            `;
            element.addEventListener('click', () => buyUpgrade(id, upgrade.type || 'producer'));
            return element;
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        function createAchievementElement(achievement) {
            const element = document.createElement('div');
            element.className = 'achievement';
            element.id = `achievement-${achievement.id}`;
            if (achievement.hidden) element.style.display = 'none';
            element.innerHTML = `
                <div class="achievement-icon">${achievement.icon}</div>
                <div class="achievement-name">${achievement.name}</div>
                <div class="achievement-description">${achievement.description}</div>
            `;
            return element;
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
        function switchTab(e) {
            const tabId = e.target.dataset.tab;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–±
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            e.target.classList.add('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            document.querySelectorAll('.upgrades-container').forEach(container => {
                container.style.display = 'none';
            });
            document.getElementById(`${tabId}-tab`).style.display = 'grid';
        }
        
        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—á–µ–Ω—å–∫–∏ –æ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π
            const produced = cookiesPerSecond * prestigeBonus;
            addCookies(produced);
            totalCookiesProduced += produced;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updateDisplay();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            checkAchievements();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–µ—Å—Ç–∏–∂–∞
            checkPrestige();
        }
        
        // –ö–ª–∏–∫ –ø–æ –ø–µ—á–µ–Ω—å–∫–µ
        function clickCookie(e) {
            // –ü–æ–∑–∏—Ü–∏—è –∫–ª–∏–∫–∞
            const rect = e.target.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // –°–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç
            createClickEffect(x, y, 1 + getClickBonus());
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—á–µ–Ω—å–∫–∏
            addCookies(1 + getClickBonus());
            totalCookiesClicked++;
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∫–ª–∏–∫–∞
        function createClickEffect(x, y, amount) {
            const clickEffect = document.createElement('div');
            clickEffect.className = 'click-effect';
            clickEffect.textContent = `+${formatNumber(amount)}`;
            clickEffect.style.left = `${x}px`;
            clickEffect.style.top = `${y}px`;
            document.getElementById('cookie-container').appendChild(clickEffect);
            
            // –£–¥–∞–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                clickEffect.remove();
            }, 1000);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—á–µ–Ω—å–∫–∏
            document.getElementById('cookie').style.transform = 'scale(0.95) rotate(-5deg)';
            setTimeout(() => {
                document.getElementById('cookie').style.transform = 'scale(1) rotate(0deg)';
            }, 100);
        }
        
        // –ë–æ–Ω—É—Å –∑–∞ –∫–ª–∏–∫
        function getClickBonus() {
            let bonus = 0;
            
            // –ë–∞–∑–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞
            for (const upgrade of Object.values(clickUpgrades)) {
                bonus += upgrade.owned * upgrade.bonus;
            }
            
            // –ü—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ –±–æ–Ω—É—Å—ã
            if (prestigeUpgrades.cookieMaster.owned) {
                bonus *= 1 + (prestigeUpgrades.cookieMaster.owned * prestigeUpgrades.cookieMaster.bonus);
            }
            
            return bonus;
        }
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—á–µ–Ω–µ–∫
        function addCookies(amount) {
            cookies += amount;
            updateDisplay();
        }
        
        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function buyUpgrade(id, type = 'producer') {
            let upgrade;
            let upgradeType;
            
            if (type === 'click') {
                upgrade = clickUpgrades[id];
                upgradeType = 'click';
            } else if (type === 'prestige') {
                upgrade = prestigeUpgrades[id];
                upgradeType = 'prestige';
            } else {
                upgrade = producers[id];
                upgradeType = 'producer';
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
            if (upgrade.max && upgrade.owned >= upgrade.max) return;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –ø–µ—á–µ–Ω–µ–∫
            if (cookies >= upgrade.price) {
                cookies -= upgrade.price;
                upgrade.owned++;
                
                // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—É
                upgrade.price = Math.floor(upgrade.basePrice * Math.pow(upgrade.priceIncrease, upgrade.owned));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
                if (type === 'producer') {
                    recalculateCPS();
                } else if (type === 'click') {
                    updateClickValue();
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                updateUpgradeUI(id, upgrade);
                updateDisplay();
                
                // –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–∫—É–ø–∫–∏
                showNotification(`–ö—É–ø–ª–µ–Ω–æ: ${upgrade.name} ${upgrade.icon || ''}`);
            } else {
                // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –ø–µ—á–µ–Ω–µ–∫
                const element = document.getElementById(`upgrade-${id}`);
                element.style.animation = 'none';
                void element.offsetWidth; // Trigger reflow
                element.style.animation = 'shake 0.5s';
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —É–ª—É—á—à–µ–Ω–∏—è
        function updateUpgradeUI(id, upgrade) {
            const element = document.getElementById(`upgrade-${id}`);
            if (!element) return;
            
            element.querySelector('.upgrade-owned').textContent = upgrade.owned;
            element.querySelector('.upgrade-price').textContent = `–¶–µ–Ω–∞: ${formatNumber(upgrade.price)}`;
            
            if (upgrade.max) {
                const progress = element.querySelector('.progress-fill');
                if (progress) {
                    progress.style.width = `${(upgrade.owned / upgrade.max) * 100}%`;
                }
            }
            
            // –û—Ç–∫–ª—é—á–∞–µ–º, –µ—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º
            if (upgrade.max && upgrade.owned >= upgrade.max) {
                element.classList.add('disabled');
            }
        }
        
        // –ü–µ—Ä–µ—Å—á–µ—Ç –ø–µ—á–µ–Ω–µ–∫ –≤ —Å–µ–∫—É–Ω–¥—É
        function recalculateCPS() {
            cookiesPerSecond = 0;
            
            // –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏
            for (const producer of Object.values(producers)) {
                cookiesPerSecond += producer.owned * producer.cps;
            }
            
            // –ü—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ –±–æ–Ω—É—Å—ã
            if (prestigeUpgrades.legacy.owned) {
                cookiesPerSecond *= 1 + (prestigeUpgrades.legacy.owned * prestigeUpgrades.legacy.bonus);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–ª–∏–∫–∞
        function updateClickValue() {
            document.getElementById('click-value').textContent = formatNumber(1 + getClickBonus());
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function updateDisplay() {
            document.getElementById('cookies').textContent = formatNumber(cookies);
            document.getElementById('cps').textContent = formatNumber(cookiesPerSecond * prestigeBonus);
            updateClickValue();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–µ—Å—Ç–∏–∂–∞
            checkPrestige();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∏–π
            updateUpgradesVisibility();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —É–ª—É—á—à–µ–Ω–∏–π
        function updateUpgradesVisibility() {
            for (const [id, producer] of Object.entries(producers)) {
                const element = document.getElementById(`upgrade-${id}`);
                if (element) {
                    if (cookies >= producer.unlockAt || producer.owned > 0) {
                        element.style.display = 'block';
                    } else {
                        element.style.display = 'none';
                    }
                }
            }
            
            for (const achievement of achievements) {
                if (achievement.hidden) {
                    const element = document.getElementById(`achievement-${achievement.id}`);
                    if (element && isAchievementUnlocked(achievement)) {
                        element.style.display = 'block';
                    }
                }
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        function checkAchievements() {
            achievements.forEach(achievement => {
                const element = document.getElementById(`achievement-${achievement.id}`);
                if (!element) return;
                
                if (isAchievementUnlocked(achievement)) {
                    element.classList.add('unlocked');
                }
            });
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
        function isAchievementUnlocked(achievement) {
            if (achievement.check) {
                return achievement.check();
            } else if (achievement.threshold) {
                if (achievement.id.includes('cookie')) {
                    return cookies >= achievement.threshold;
                } else if (achievement.id.includes('click')) {
                    return totalCookiesClicked >= achievement.threshold;
                }
            }
            return false;
        }
        
        // –ü–æ—è–≤–ª–µ–Ω–∏–µ –∑–æ–ª–æ—Ç–æ–≥–æ –ø–µ—á–µ–Ω—å—è
        function spawnGoldenCookie() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —à–∞–Ω—Å –ø–æ—è–≤–ª–µ–Ω–∏—è (20% + –±–æ–Ω—É—Å—ã)
            const baseChance = 0.2;
            const goldenLuckBonus = prestigeUpgrades.goldenLuck.owned * prestigeUpgrades.goldenLuck.bonus;
            const spawnChance = baseChance + goldenLuckBonus;
            
            if (Math.random() > spawnChance) return;
            
            const goldenCookie = document.getElementById('golden-cookie');
            
            // –ü–æ–∑–∏—Ü–∏—è
            const x = Math.random() * (window.innerWidth - 100);
            const y = Math.random() * (window.innerHeight - 100);
            
            goldenCookie.style.left = `${x}px`;
            goldenCookie.style.top = `${y}px`;
            goldenCookie.style.display = 'block';
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
            goldenCookie.onclick = function() {
                goldenCookiesClicked++;
                
                // –°–ª—É—á–∞–π–Ω—ã–π –±–æ–Ω—É—Å
                const bonusTypes = [
                    { type: 'cookies', chance: 0.6, getAmount: () => Math.floor(cookiesPerSecond * 30 * (1 + Math.random())) },
                    { type: 'multiplier', chance: 0.3, getAmount: () => 2, duration: 30 },
                    { type: 'clickStorm', chance: 0.1, duration: 10 }
                ];
                
                const selectedBonus = selectRandomBonus(bonusTypes);
                applyGoldenCookieBonus(selectedBonus, x, y);
                
                goldenCookie.style.display = 'none';
                goldenCookie.onclick = null;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                checkAchievements();
                
                // –°–Ω–æ–≤–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ª—É—á–∞–π–Ω–æ–µ –≤—Ä–µ–º—è
                setTimeout(spawnGoldenCookie, 15000 + Math.random() * 45000);
            };
            
            // –ò—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥, –µ—Å–ª–∏ –Ω–µ –∫–ª–∏–∫–Ω—É–ª–∏
            setTimeout(() => {
                if (goldenCookie.style.display === 'block') {
                    goldenCookie.style.display = 'none';
                    goldenCookie.onclick = null;
                    setTimeout(spawnGoldenCookie, 15000 + Math.random() * 45000);
                }
            }, 15000);
        }
        
        // –í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞
        function selectRandomBonus(bonusTypes) {
            const total = bonusTypes.reduce((sum, type) => sum + type.chance, 0);
            let random = Math.random() * total;
            
            for (const type of bonusTypes) {
                if (random < type.chance) {
                    return type;
                }
                random -= type.chance;
            }
            
            return bonusTypes[0]; // fallback
        }
        
        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞ –∑–æ–ª–æ—Ç–æ–≥–æ –ø–µ—á–µ–Ω—å—è
        function applyGoldenCookieBonus(bonus, x, y) {
            let message = "";
            
            if (bonus.type === 'cookies') {
                const amount = bonus.getAmount();
                addCookies(amount);
                message = `+${formatNumber(amount)} –ø–µ—á–µ–Ω–µ–∫!`;
                
                // –≠—Ñ—Ñ–µ–∫—Ç
                createClickEffect(x, y, amount, true);
            } 
            else if (bonus.type === 'multiplier') {
                const multiplier = bonus.getAmount();
                const originalCPS = cookiesPerSecond;
                cookiesPerSecond *= multiplier;
                message = `x${multiplier} –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É –Ω–∞ ${bonus.duration} —Å–µ–∫!`;
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ duration —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    cookiesPerSecond = originalCPS;
                    showNotification("–ë–æ–Ω—É—Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è");
                }, bonus.duration * 1000);
            }
            else if (bonus.type === 'clickStorm') {
                message = `–®–¢–û–†–ú –ö–õ–ò–ö–û–í –Ω–∞ ${bonus.duration} —Å–µ–∫!`;
                startClickStorm(bonus.duration);
            }
            
            showNotification(`–ó–æ–ª–æ—Ç–æ–µ –ø–µ—á–µ–Ω—å–µ: ${message}`, true);
        }
        
        // –®—Ç–æ—Ä–º –∫–ª–∏–∫–æ–≤
        function startClickStorm(duration) {
            const stormInterval = setInterval(() => {
                // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –Ω–∞ –ø–µ—á–µ–Ω—å–∫–µ
                const cookie = document.getElementById('cookie-container');
                const rect = cookie.getBoundingClientRect();
                const x = Math.random() * rect.width;
                const y = Math.random() * rect.height;
                
                // –ê–≤—Ç–æ–∫–ª–∏–∫
                createClickEffect(x, y, 1 + getClickBonus());
                addCookies(1 + getClickBonus());
                totalCookiesClicked++;
            }, 100);
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à—Ç–æ—Ä–º —á–µ—Ä–µ–∑ duration —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                clearInterval(stormInterval);
                showNotification("–®—Ç–æ—Ä–º –∫–ª–∏–∫–æ–≤ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è");
            }, duration * 1000);
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–µ—Å—Ç–∏–∂–∞
        function checkPrestige() {
            const nextPrestige = Math.floor(1000000 * Math.pow(2, prestigeLevel));
            const prestigeButton = document.getElementById('prestige-button');
            
            document.getElementById('next-prestige').textContent = formatNumber(nextPrestige);
            
            if (cookies >= nextPrestige) {
                prestigeButton.disabled = false;
                prestigeButton.classList.add('rainbow-text');
            } else {
                prestigeButton.disabled = true;
                prestigeButton.classList.remove('rainbow-text');
            }
        }
        
        // –ü—Ä–µ—Å—Ç–∏–∂
        function doPrestige() {
            const nextPrestige = Math.floor(1000000 * Math.pow(2, prestigeLevel));
            
            if (cookies < nextPrestige) return;
            
            if (confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Å—Ç–∏–∂? –í—ã –ø–æ–ª—É—á–∏—Ç–µ ${Math.floor(Math.sqrt(cookies / 1000000))} –ø—Ä–µ—Å—Ç–∏–∂–Ω—ã—Ö –æ—á–∫–æ–≤, –Ω–æ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –≤—Å–µ –ø–µ—á–µ–Ω—å—è –∏ —É–ª—É—á—à–µ–Ω–∏—è.`)) {
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—á–∫–∏ –ø—Ä–µ—Å—Ç–∏–∂–∞
                const pointsGained = Math.floor(Math.sqrt(cookies / 1000000));
                prestigePoints += pointsGained;
                prestigeLevel++;
                prestigeBonus = 1 + (prestigeLevel * 0.1);
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–≥—Ä—É
                cookies = 0;
                cookiesPerSecond = 0;
                cookiesPerClick = 1;
                totalCookiesClicked = 0;
                totalCookiesProduced = 0;
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π
                for (const producer of Object.values(producers)) {
                    producer.owned = 0;
                    producer.price = producer.basePrice;
                }
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —É–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞
                for (const upgrade of Object.values(clickUpgrades)) {
                    upgrade.owned = 0;
                    upgrade.price = upgrade.basePrice;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                updateDisplay();
                document.getElementById('prestige-level').textContent = prestigeLevel;
                document.getElementById('prestige-points').textContent = prestigePoints;
                document.getElementById('prestige-bonus').textContent = prestigeBonus.toFixed(1);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ UI
                for (const [id, producer] of Object.entries(producers)) {
                    updateUpgradeUI(id, producer);
                }
                
                for (const [id, upgrade] of Object.entries(clickUpgrades)) {
                    updateUpgradeUI(id, upgrade);
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`–ü—Ä–µ—Å—Ç–∏–∂ ${prestigeLevel}! –ü–æ–ª—É—á–µ–Ω–æ ${pointsGained} –æ—á–∫–æ–≤ –ø—Ä–µ—Å—Ç–∏–∂–∞`, true);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–≥—Ä—É
                saveGame();
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, isImportant = false) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            if (isImportant) {
                notification.style.background = 'linear-gradient(135deg, #FF5722, #FF9800)';
            } else {
                notification.style.background = 'rgba(0,0,0,0.8)';
            }
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, isImportant ? 3000 : 2000);
        }
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
        function formatNumber(num) {
            if (num >= 1e12) return (num / 1e12).toFixed(1) + 'T';
            if (num >= 1e9) return (num / 1e9).toFixed(1) + 'B';
            if (num >= 1e6) return (num / 1e6).toFixed(1) + 'M';
            if (num >= 1e3) return (num / 1e3).toFixed(1) + 'K';
            return Math.floor(num).toString();
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            gameState = {
                lastUpdate: Date.now(),
                cookies: cookies,
                upgrades: {
                    producers: {},
                    click: {},
                    prestige: {}
                },
                achievements: [],
                stats: {
                    totalCookiesClicked: totalCookiesClicked,
                    totalCookiesProduced: totalCookiesProduced,
                    goldenCookiesClicked: goldenCookiesClicked
                },
                prestige: {
                    level: prestigeLevel,
                    points: prestigePoints,
                    bonus: prestigeBonus
                },
                version: gameVersion
            };
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π
            for (const [id, producer] of Object.entries(producers)) {
                gameState.upgrades.producers[id] = {
                    owned: producer.owned,
                    price: producer.price
                };
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —É–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞
            for (const [id, upgrade] of Object.entries(clickUpgrades)) {
                gameState.upgrades.click[id] = {
                    owned: upgrade.owned,
                    price: upgrade.price
                };
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
            for (const [id, upgrade] of Object.entries(prestigeUpgrades)) {
                gameState.upgrades.prestige[id] = {
                    owned: upgrade.owned,
                    price: upgrade.price
                };
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            gameState.achievements = achievements
                .filter(achievement => isAchievementUnlocked(achievement))
                .map(achievement => achievement.id);
            
            localStorage.setItem('ultimateCookieClickerSave', JSON.stringify(gameState));
            
            showNotification("–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞! üíæ");
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
        function loadGame() {
            const savedData = localStorage.getItem('ultimateCookieClickerSave');
            
            if (savedData) {
                try {
                    const loadedState = JSON.parse(savedData);
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
                    if (loadedState.version !== gameVersion) {
                        showNotification("–í–µ—Ä—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã");
                    }
                    
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    cookies = loadedState.cookies || 0;
                    
                    // –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏
                    if (loadedState.upgrades?.producers) {
                        for (const [id, data] of Object.entries(loadedState.upgrades.producers)) {
                            if (producers[id]) {
                                producers[id].owned = data.owned || 0;
                                producers[id].price = data.price || producers[id].basePrice;
                            }
                        }
                    }
                    
                    // –£–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞
                    if (loadedState.upgrades?.click) {
                        for (const [id, data] of Object.entries(loadedState.upgrades.click)) {
                            if (clickUpgrades[id]) {
                                clickUpgrades[id].owned = data.owned || 0;
                                clickUpgrades[id].price = data.price || clickUpgrades[id].basePrice;
                            }
                        }
                    }
                    
                    // –ü—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
                    if (loadedState.upgrades?.prestige) {
                        for (const [id, data] of Object.entries(loadedState.upgrades.prestige)) {
                            if (prestigeUpgrades[id]) {
                                prestigeUpgrades[id].owned = data.owned || 0;
                                prestigeUpgrades[id].price = data.price || prestigeUpgrades[id].basePrice;
                            }
                        }
                    }
                    
                    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    if (loadedState.stats) {
                        totalCookiesClicked = loadedState.stats.totalCookiesClicked || 0;
                        totalCookiesProduced = loadedState.stats.totalCookiesProduced || 0;
                        goldenCookiesClicked = loadedState.stats.goldenCookiesClicked || 0;
                    }
                    
                    // –ü—Ä–µ—Å—Ç–∏–∂
                    if (loadedState.prestige) {
                        prestigeLevel = loadedState.prestige.level || 0;
                        prestigePoints = loadedState.prestige.points || 0;
                        prestigeBonus = loadedState.prestige.bonus || 1;
                    }
                    
                    // –ü–µ—Ä–µ—Å—á–µ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
                    recalculateCPS();
                    updateClickValue();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ—Å—Ç–∏–∂ UI
                    document.getElementById('prestige-level').textContent = prestigeLevel;
                    document.getElementById('prestige-points').textContent = prestigePoints;
                    document.getElementById('prestige-bonus').textContent = prestigeBonus.toFixed(1);
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                    if (Array.isArray(loadedState.achievements)) {
                        loadedState.achievements.forEach(achievementId => {
                            const achievement = achievements.find(a => a.id === achievementId);
                            if (achievement) {
                                const element = document.getElementById(`achievement-${achievement.id}`);
                                if (element) element.classList.add('unlocked');
                            }
                        });
                    }
                    
                    showNotification("–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞! üéÆ");
                } catch (e) {
                    console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", e);
                    showNotification("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è üò¢");
                }
            }
        }
        
        // –†–∞—Å—á–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω-–ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function calculateOfflineProgress() {
            if (gameState.lastUpdate) {
                const now = Date.now();
                const diff = now - gameState.lastUpdate;
                const offlineSeconds = Math.min(diff / 1000, 86400); // –ú–∞–∫—Å–∏–º—É–º 24 —á–∞—Å–∞
                
                if (offlineSeconds > 10) { // –ú–∏–Ω–∏–º—É–º 10 —Å–µ–∫—É–Ω–¥
                    const offlineCookies = cookiesPerSecond * offlineSeconds * 0.5 * prestigeBonus; // 50% –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
                    if (offlineCookies > 0) {
                        addCookies(offlineCookies);
                        totalCookiesProduced += offlineCookies;
                        showNotification(`–ü–æ–∫–∞ –≤–∞—Å –Ω–µ –±—ã–ª–æ: ${formatNumber(offlineCookies)} –ø–µ—á–µ–Ω–µ–∫ (${formatTime(offlineSeconds)})`, true);
                    }
                }
            }
        }
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            
            return [
                hours > 0 ? `${hours}—á` : '',
                minutes > 0 ? `${minutes}–º` : '',
                `${secs}—Å`
            ].filter(Boolean).join(' ');
        }
        
        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        function autoSave() {
            saveGame();
            showNotification("–ò–≥—Ä–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞");
        }
        
        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä—É? –í—Å–µ –≤–∞—à–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.")) {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
                cookies = 0;
                cookiesPerSecond = 0;
                cookiesPerClick = 1;
                totalCookiesClicked = 0;
                totalCookiesProduced = 0;
                prestigeLevel = 0;
                prestigePoints = 0;
                prestigeBonus = 1;
                goldenCookiesClicked = 0;
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π
                for (const producer of Object.values(producers)) {
                    producer.owned = 0;
                    producer.price = producer.basePrice;
                }
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —É–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞
                for (const upgrade of Object.values(clickUpgrades)) {
                    upgrade.owned = 0;
                    upgrade.price = upgrade.basePrice;
                }
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
                for (const upgrade of Object.values(prestigeUpgrades)) {
                    upgrade.owned = 0;
                    upgrade.price = upgrade.basePrice;
                }
                
                // –ü–µ—Ä–µ—Å—á–µ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
                recalculateCPS();
                updateClickValue();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                updateDisplay();
                document.getElementById('prestige-level').textContent = prestigeLevel;
                document.getElementById('prestige-points').textContent = prestigePoints;
                document.getElementById('prestige-bonus').textContent = prestigeBonus.toFixed(1);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ UI
                for (const [id, producer] of Object.entries(producers)) {
                    updateUpgradeUI(id, producer);
                }
                
                for (const [id, upgrade] of Object.entries(clickUpgrades)) {
                    updateUpgradeUI(id, upgrade);
                }
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                document.querySelectorAll('.achievement').forEach(el => {
                    el.classList.remove('unlocked');
                });
                
                // –£–¥–∞–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                localStorage.removeItem('ultimateCookieClickerSave');
                
                showNotification("–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞! üîÑ", true);
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = initGame;
    </script>
</body>
</html>
